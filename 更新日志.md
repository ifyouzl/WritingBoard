# 📝 WritingBoard 更新日志

## v1.1.0 - 小组件优化 (2025-10-29)

### ✨ 改进内容

#### 1. 小组件不再强制置顶

**改变：**
- `alwaysOnTop: false` - 小组件可被其他窗口覆盖
- 打开浏览器、Office 等应用时，可以正常覆盖小组件

**优势：**
- ✅ 不会遮挡日常工作
- ✅ 用户可以自由管理窗口
- ✅ 更灵活的窗口管理方式

---

#### 2. 任务栏显示小组件图标

**改变：**
- `skipTaskbar: false` - 小组件在任务栏显示图标
- 窗口标题：`WritingBoard - 桌面小组件`

**优势：**
- ✅ 快速访问：点击任务栏图标可切换显示/隐藏
- ✅ 清晰识别：能区分主窗口和小组件
- ✅ 标准操作：符合 Windows 窗口管理习惯
- ✅ Alt+Tab 可以切换到小组件

---

### 🎯 使用方式

#### 进入小组件模式
```
点击主窗口右上角 "⊟" 按钮
↓
主窗口隐藏，小组件显示在桌面右下角
```

#### 显示/隐藏小组件

**方式1：点击任务栏图标**
```
任务栏显示：WritingBoard - 桌面小组件
点击 → 切换显示/隐藏
```

**方式2：点击小组件上的按钮**
```
点击小组件的 "✕" 按钮 → 关闭小组件，恢复主窗口
```

#### 被其他窗口覆盖
```
打开浏览器/Office/其他应用
↓
这些窗口可以覆盖在小组件上
↓
点击任务栏的小组件图标 → 恢复显示
```

---

### 🔧 技术改动

#### 文件：src/main/main.ts

**小组件窗口配置（第150-168行）：**

```typescript
widgetWindow = new BrowserWindow({
  width: 280,
  height: 400,
  x: width - 300,
  y: height - 420,
  frame: false,
  transparent: true,
  alwaysOnTop: false,  // ← 改为 false（不置顶）
  skipTaskbar: false,  // ← 改为 false（显示任务栏）
  resizable: false,
  show: false,
  title: 'WritingBoard - 桌面小组件',
  backgroundColor: '#00000000',
  hasShadow: false,
  webPreferences: {
    nodeIntegration: false,
    contextIsolation: true,
    preload: path.join(__dirname, 'preload.js')
  }
});
```

---

### 📊 功能对比

#### 之前 (v1.0.0)
```
❌ 小组件始终在最前面
❌ 遮挡浏览器、Office 等应用
❌ 任务栏没有图标
❌ 最小化后难以恢复
```

#### 现在 (v1.1.0)
```
✅ 小组件可被其他窗口覆盖
✅ 打开应用时不会被挡住
✅ 任务栏显示图标
✅ 点击任务栏图标快速切换
```

---

### 🚀 打包和发布

#### 打包新版本

```bash
# 以管理员身份运行
右键 "D盘打包.bat" → 以管理员身份运行
```

打包完成后，在这里找到应用：
```
D:\WritingBoard\Release\win-unpacked\WritingBoard.exe
```

#### 发布到 GitHub

1. **创建 Release**
   ```
   GitHub 仓库 → Releases → Create a new release
   ```

2. **填写版本信息**
   ```
   Tag: v1.1.0
   Title: WritingBoard v1.1.0 - 小组件优化
   ```

3. **更新说明**
   ```markdown
   ## 改进内容
   
   - 小组件不再强制置顶，可被其他窗口覆盖
   - 任务栏显示小组件图标，支持快速切换
   - 更灵活的窗口管理方式
   ```

4. **上传文件**
   - `WritingBoard Setup 1.1.0.exe` - 安装程序
   - `WritingBoard-Portable-1.1.0.exe` - 便携版

---

### 💾 数据存储

所有数据继续存储在 D 盘：
```
D:\WritingBoard\Data\writingboard-data.json
```

小组件优化不影响数据存储，用户数据保持安全。

---

### ✅ 测试清单

- [x] 小组件可被其他窗口覆盖
- [x] 任务栏显示小组件图标
- [x] 点击任务栏图标能隐藏/显示
- [x] 点击小组件 "✕" 能恢复主窗口
- [x] Alt+Tab 能看到小组件
- [x] 数据保存正常

---

### 📝 版本信息

- **版本号：** v1.1.0
- **发布日期：** 2025-10-29
- **改动类型：** 功能优化
- **影响范围：** 小组件窗口管理

---

### 🎉 总结

v1.1.0 优化了小组件的窗口管理方式，使其更符合 Windows 标准操作习惯，用户可以更灵活地管理小组件和其他窗口的显示，既能快速访问待办事项，又不会被强制置顶遮挡工作内容。

---

**准备好发布了吗？** 🚀
